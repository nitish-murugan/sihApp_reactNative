{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nvar WebSocketService = function () {\n  function WebSocketService() {\n    _classCallCheck(this, WebSocketService);\n    this.ws = null;\n    this.isConnected = false;\n    this.messageListeners = [];\n    this.reconnectAttempts = 0;\n    this.maxReconnectAttempts = 5;\n    this.reconnectInterval = 3000;\n  }\n  return _createClass(WebSocketService, [{\n    key: \"connect\",\n    value: function connect() {\n      var _this = this;\n      var url = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'ws://192.168.43.205:8080';\n      console.log('Attempting to connect to:', url);\n      try {\n        this.ws = new WebSocket(url);\n        this.ws.onopen = function () {\n          console.log('✅ WebSocket connected successfully to:', url);\n          _this.isConnected = true;\n          _this.reconnectAttempts = 0;\n          _this.notifyConnectionStatus('Connected');\n        };\n        this.ws.onmessage = function (event) {\n          try {\n            var message = JSON.parse(event.data);\n            console.log('Received WebSocket message:', message);\n            _this.messageListeners.forEach(function (callback) {\n              callback(message);\n            });\n          } catch (error) {\n            console.error('Error parsing WebSocket message:', error);\n          }\n        };\n        this.ws.onclose = function (event) {\n          console.log('❌ WebSocket connection closed. Code:', event.code, 'Reason:', event.reason);\n          _this.isConnected = false;\n          _this.notifyConnectionStatus('Disconnected');\n          _this.attemptReconnect();\n        };\n        this.ws.onerror = function (error) {\n          console.error('❌ WebSocket error:', error);\n          console.error('Failed to connect to:', url);\n          _this.isConnected = false;\n          _this.notifyConnectionStatus('Error');\n        };\n      } catch (error) {\n        console.error('Failed to create WebSocket connection:', error);\n        this.notifyConnectionStatus('Failed to Connect');\n      }\n    }\n  }, {\n    key: \"attemptReconnect\",\n    value: function attemptReconnect() {\n      var _this2 = this;\n      if (this.reconnectAttempts < this.maxReconnectAttempts) {\n        this.reconnectAttempts++;\n        console.log(`Attempting to reconnect... (${this.reconnectAttempts}/${this.maxReconnectAttempts})`);\n        this.notifyConnectionStatus('Reconnecting...');\n        setTimeout(function () {\n          _this2.connect();\n        }, this.reconnectInterval);\n      } else {\n        console.log('Max reconnection attempts reached');\n        this.notifyConnectionStatus('Connection Failed');\n      }\n    }\n  }, {\n    key: \"addMessageListener\",\n    value: function addMessageListener(callback) {\n      this.messageListeners.push(callback);\n    }\n  }, {\n    key: \"removeMessageListener\",\n    value: function removeMessageListener(callback) {\n      var index = this.messageListeners.indexOf(callback);\n      if (index > -1) {\n        this.messageListeners.splice(index, 1);\n      }\n    }\n  }, {\n    key: \"notifyConnectionStatus\",\n    value: function notifyConnectionStatus(status) {\n      this.connectionStatusListeners = this.connectionStatusListeners || [];\n      this.connectionStatusListeners.forEach(function (callback) {\n        return callback(status);\n      });\n    }\n  }, {\n    key: \"addConnectionStatusListener\",\n    value: function addConnectionStatusListener(callback) {\n      this.connectionStatusListeners = this.connectionStatusListeners || [];\n      this.connectionStatusListeners.push(callback);\n    }\n  }, {\n    key: \"removeConnectionStatusListener\",\n    value: function removeConnectionStatusListener(callback) {\n      if (this.connectionStatusListeners) {\n        var index = this.connectionStatusListeners.indexOf(callback);\n        if (index > -1) {\n          this.connectionStatusListeners.splice(index, 1);\n        }\n      }\n    }\n  }, {\n    key: \"disconnect\",\n    value: function disconnect() {\n      if (this.ws) {\n        this.ws.close();\n        this.ws = null;\n        this.isConnected = false;\n        this.messageListeners = [];\n        this.connectionStatusListeners = [];\n      }\n    }\n  }, {\n    key: \"send\",\n    value: function send(data) {\n      if (this.ws && this.isConnected) {\n        this.ws.send(JSON.stringify(data));\n      } else {\n        console.warn('WebSocket not connected');\n      }\n    }\n  }]);\n}();\nexport default new WebSocketService();","map":{"version":3,"names":["WebSocketService","_classCallCheck","ws","isConnected","messageListeners","reconnectAttempts","maxReconnectAttempts","reconnectInterval","_createClass","key","value","connect","_this","url","arguments","length","undefined","console","log","WebSocket","onopen","notifyConnectionStatus","onmessage","event","message","JSON","parse","data","forEach","callback","error","onclose","code","reason","attemptReconnect","onerror","_this2","setTimeout","addMessageListener","push","removeMessageListener","index","indexOf","splice","status","connectionStatusListeners","addConnectionStatusListener","removeConnectionStatusListener","disconnect","close","send","stringify","warn"],"sources":["E:/Projects/SIH app zip/sihApp_reactNative/src/services/WebSocketService.js"],"sourcesContent":["class WebSocketService {\r\n  constructor() {\r\n    this.ws = null;\r\n    this.isConnected = false;\r\n    this.messageListeners = [];\r\n    this.reconnectAttempts = 0;\r\n    this.maxReconnectAttempts = 5;\r\n    this.reconnectInterval = 3000; // 3 seconds\r\n  }\r\n\r\n  connect(url = 'ws://192.168.43.205:8080') {\r\n    console.log('Attempting to connect to:', url);\r\n    try {\r\n      this.ws = new WebSocket(url);\r\n\r\n      this.ws.onopen = () => {\r\n        console.log('✅ WebSocket connected successfully to:', url);\r\n        this.isConnected = true;\r\n        this.reconnectAttempts = 0;\r\n        this.notifyConnectionStatus('Connected');\r\n      };\r\n\r\n      this.ws.onmessage = (event) => {\r\n        try {\r\n          const message = JSON.parse(event.data);\r\n          console.log('Received WebSocket message:', message);\r\n          \r\n          // Notify all listeners\r\n          this.messageListeners.forEach(callback => {\r\n            callback(message);\r\n          });\r\n        } catch (error) {\r\n          console.error('Error parsing WebSocket message:', error);\r\n        }\r\n      };\r\n\r\n      this.ws.onclose = (event) => {\r\n        console.log('❌ WebSocket connection closed. Code:', event.code, 'Reason:', event.reason);\r\n        this.isConnected = false;\r\n        this.notifyConnectionStatus('Disconnected');\r\n        this.attemptReconnect();\r\n      };\r\n\r\n      this.ws.onerror = (error) => {\r\n        console.error('❌ WebSocket error:', error);\r\n        console.error('Failed to connect to:', url);\r\n        this.isConnected = false;\r\n        this.notifyConnectionStatus('Error');\r\n      };\r\n\r\n    } catch (error) {\r\n      console.error('Failed to create WebSocket connection:', error);\r\n      this.notifyConnectionStatus('Failed to Connect');\r\n    }\r\n  }\r\n\r\n  attemptReconnect() {\r\n    if (this.reconnectAttempts < this.maxReconnectAttempts) {\r\n      this.reconnectAttempts++;\r\n      console.log(`Attempting to reconnect... (${this.reconnectAttempts}/${this.maxReconnectAttempts})`);\r\n      this.notifyConnectionStatus('Reconnecting...');\r\n      \r\n      setTimeout(() => {\r\n        this.connect();\r\n      }, this.reconnectInterval);\r\n    } else {\r\n      console.log('Max reconnection attempts reached');\r\n      this.notifyConnectionStatus('Connection Failed');\r\n    }\r\n  }\r\n\r\n  addMessageListener(callback) {\r\n    this.messageListeners.push(callback);\r\n  }\r\n\r\n  removeMessageListener(callback) {\r\n    const index = this.messageListeners.indexOf(callback);\r\n    if (index > -1) {\r\n      this.messageListeners.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  notifyConnectionStatus(status) {\r\n    // This will be used to notify components about connection status changes\r\n    this.connectionStatusListeners = this.connectionStatusListeners || [];\r\n    this.connectionStatusListeners.forEach(callback => callback(status));\r\n  }\r\n\r\n  addConnectionStatusListener(callback) {\r\n    this.connectionStatusListeners = this.connectionStatusListeners || [];\r\n    this.connectionStatusListeners.push(callback);\r\n  }\r\n\r\n  removeConnectionStatusListener(callback) {\r\n    if (this.connectionStatusListeners) {\r\n      const index = this.connectionStatusListeners.indexOf(callback);\r\n      if (index > -1) {\r\n        this.connectionStatusListeners.splice(index, 1);\r\n      }\r\n    }\r\n  }\r\n\r\n  disconnect() {\r\n    if (this.ws) {\r\n      this.ws.close();\r\n      this.ws = null;\r\n      this.isConnected = false;\r\n      this.messageListeners = [];\r\n      this.connectionStatusListeners = [];\r\n    }\r\n  }\r\n\r\n  send(data) {\r\n    if (this.ws && this.isConnected) {\r\n      this.ws.send(JSON.stringify(data));\r\n    } else {\r\n      console.warn('WebSocket not connected');\r\n    }\r\n  }\r\n}\r\n\r\n// Export singleton instance\r\nexport default new WebSocketService();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}